<!DOCTYPE html>
<html lang="en-GB">
<head>
  {% include head.html %}
</head>
<body>
  <header class="site-header site-header--home">
    <div class="header-inner">
      <a href="{{ '/' | relative_url }}" class="site-brand">
        <img src="{{ '/assets/meeple-map-icon.svg' | relative_url }}" alt="" class="site-logo">
        <div class="site-brand-text">
          <span class="site-title">BoardGameClubs<span class="site-title-tld">.uk</span></span>
          <span class="site-tagline">Community-built. Open source. Find your table.</span>
        </div>
      </a>
      <div class="header-search">
        <div class="search-bar">
          <i data-lucide="search" class="search-icon"></i>
          <input type="text" class="search-input" id="search-input" placeholder="Search by postcode, club name, or location..." autocomplete="off">
          <div class="location-suggestions" id="location-suggestions"></div>
        </div>
      </div>
      <nav>
        <a href="{{ '/' | relative_url }}">Map</a>
        <a href="{{ '/about' | relative_url }}">About</a>
        <a href="{{ '/contribute' | relative_url }}" class="nav-cta">+ Add a Club</a>
        <a href="https://github.com/BoardGameClubs/BoardGameClubs_Web" target="_blank" rel="noopener" class="nav-github" aria-label="GitHub"><i data-lucide="github"></i></a>
      </nav>
    </div>
  </header>
  <main class="page-content">
    <div class="home-layout">
      <div class="map-container">
        <div id="map"></div>
      </div>
      <div class="sidebar" id="sidebar">
        <div class="drawer-handle" id="drawer-handle"><i data-lucide="chevron-up" class="drawer-chevron"></i></div>
        <div class="filter-bar">
          <div class="search-bar sidebar-search">
            <i data-lucide="search" class="search-icon"></i>
            <input type="text" class="search-input" id="search-input-mobile" placeholder="Search by postcode, club name, or location..." autocomplete="off">
            <div class="location-suggestions" id="location-suggestions-mobile"></div>
          </div>
          <div class="filter-row">
            <select class="filter-select" id="day-filter">
              <option value="">All days</option>
              <option value="Monday">Monday</option>
              <option value="Tuesday">Tuesday</option>
              <option value="Wednesday">Wednesday</option>
              <option value="Thursday">Thursday</option>
              <option value="Friday">Friday</option>
              <option value="Saturday">Saturday</option>
              <option value="Sunday">Sunday</option>
            </select>
            <select class="filter-select" id="distance-filter" disabled>
              <option value="">Any distance</option>
              <option value="5">Within 5 miles</option>
              <option value="10">Within 10 miles</option>
              <option value="25">Within 25 miles</option>
              <option value="50">Within 50 miles</option>
            </select>
            <button class="locate-btn" id="locate-btn" type="button">
              <i data-lucide="crosshair" style="width:14px;height:14px;"></i>
              <span>Use my location</span>
            </button>
          </div>
          <div class="location-pill" id="location-pill" style="display:none;">
            <i data-lucide="map-pin" style="width:12px;height:12px;"></i>
            <span id="location-pill-label"></span>
            <button type="button" id="location-clear" aria-label="Clear location"><i data-lucide="x" style="width:12px;height:12px;"></i></button>
          </div>
        </div>
        <div class="result-count" id="result-count"></div>
        <div class="club-list" id="club-list"></div>

        <noscript>
          <div class="club-list">
            {% for club in site.clubs %}
              {% include club-card.html club=club %}
            {% endfor %}
          </div>
        </noscript>
      </div>
    </div>
  </main>

  <script>
    window.GameClub = { baseurl: "{{ site.baseurl }}" };
  </script>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
          integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
          crossorigin=""></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <script src="{{ '/assets/js/map.js' | relative_url }}?v={{ site.time | date: '%s' }}"></script>
  <script src="{{ '/assets/js/search.js' | relative_url }}?v={{ site.time | date: '%s' }}"></script>
  <script src="{{ '/assets/js/location.js' | relative_url }}?v={{ site.time | date: '%s' }}"></script>
  <script src="{{ '/assets/js/drawer.js' | relative_url }}?v={{ site.time | date: '%s' }}"></script>
  <script src="{{ '/assets/js/app.js' | relative_url }}?v={{ site.time | date: '%s' }}"></script>
  <script src="https://unpkg.com/lucide@latest"></script>
  <script>lucide.createIcons();</script>
</body>
</html>
